!function e(t,o,n){function r(c,u){if(!o[c]){if(!t[c]){var a="function"==typeof require&&require;if(!u&&a)return a(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+c+"'")}var l=o[c]={exports:{}};t[c][0].call(l.exports,function(e){var o=t[c][1][e];return r(o?o:e)},l,l.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof require&&require,c=0;c<n.length;c++)r(n[c]);return r}({1:[function(e,t){!function(){var e=function(t,o){if(e.colors[o])return this.color=e.colors[o].toRgb(t),this;throw new Error("No color handler "+o)};e.prototype.get=function(t){if(e.colors[t])return e.colors[t].fromRgb(this.color);throw new Error("No color handler "+t)},e.prototype.blend=function(e,t){return this.color=[Math.round(t*this.color[0]+(1-t)*e.color[0]),Math.round(t*this.color[1]+(1-t)*e.color[1]),Math.round(t*this.color[2]+(1-t)*e.color[2])],this},e.prototype.darken=function(t){return this.blend(new e([0,0,0],"rgb"),t),this},e.prototype.lighten=function(t){return this.blend(new e([255,255,255],"rgb"),t),this},e.colors={},e.colors.rgb={fromRgb:function(e){return e},toRgb:function(e){return e}},e.colors.hsl={toRgb:function(e){function t(e,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?e+(t-e)*o*6:.5>o?t:2/3>o?e+(t-e)*(2/3-o)*6:e}var o=e[0]/360,n=e[1]/100,r=e[2]/100;return m2=.5>=r?r*(n+1):r+n-r*n,m1=2*r-m2,[Math.round(255*t(m1,m2,o+1/3)),Math.round(255*t(m1,m2,o)),Math.round(255*t(m1,m2,o-1/3))]},fromRgb:function(e){var t,o,n=e[0]/255,r=e[1]/255,i=e[2]/255,c=Math.max(n,r,i),u=Math.min(n,r,i),a=Math.round(.5*(c+u)*100);return c===u?[0,0,a]:(c===n&&r>=i?t=60*(r-i)/(c-u):c===n&&i>r?t=60*(r-i)/(c-u)+360:c===r?t=60*(i-n)/(c-u)+120:c===i&&(t=60*(n-r)/(c-u)+240),.5>=a?o=(c-u)/2*a:a>.5&&(o=(c-u)/(2-2*a)),[Math.round(360*t),Math.round(100*o),a])}},e.colors.hex={fromRgb:function(e){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)},toRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=e:window.RainbowColor=e}()},{}],2:[function(e,t,o){(function(){var e,n,r,i,c,u,a;r=function(e,t){return e.value.slice(0,t).split("\r\n").length-1},e=function(e){var t,o,n,i;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?{start:e.selectionStart,end:e.selectionEnd}:document.selection&&document.selection.createRange&&e.createTextRange?(t=e.createTextRange(),t.moveToBookmark(document.selection.createRange().getBookmark()),n=e.createTextRange(),n.collapse(!1),t.compareEndPoints("StartToEnd",n)>=0?i=o=e.value.length:(i=-t.moveStart("character",-e.value.length),i+=r(e,i),t.compareEndPoints("EndToEnd",n)>=0?o=e.value.length:(o=-t.moveEnd("character",-e.value.length),o+=r(e,o))),{start:i,end:o}):void 0},c=function(e,t,o){var n;return null==o&&(o=t),"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(e.selectionStart=t,e.selectionEnd=o):document.selection&&document.selection.createRange&&e.createTextRange?(n=e.createTextRange(),n.collapse(!0),n.moveEnd("character",o-r(e,o)),n.moveStart("character",t-r(e,t)),n.select()):void 0},n=function(t){var o;return o=e(t),t.value.slice(o.start,o.end)},u=function(t,o){var n;return n=e(t),t.value=t.value.slice(0,n.start)+o+t.value.slice(n.end)},a=function(t,o,r){var i,a,l;return i=e(t),l=n(t),u(t,o+l+r),a=i.start+o.length,c(t,a,a+l.length)},i={getCaret:e,setCaret:c,getText:n,setText:u,wrap:a},"undefined"!=typeof o?t.exports=i:"undefined"!=typeof window&&(window.selix=i)}).call(this)},{}],3:[function(e){function t(){p.css({top:m.height()/2-p.height()/2,left:m.width()/2-p.width()/2})}function o(){m.bind("resize",t),s.show().addClass("editor-overlay-animate"),p.addClass("editor-main-animate")}function n(){m.unbind("resize",t),s.hide().removeClass("editor-overlay-animate"),p.removeClass("editor-main-animate")}function r(e){p.children().hide(),$(e).show(),o(),t()}function i(e){var t=$(e),o=t.position();h.css({display:"block",top:o.top+t.height()+20,left:o.left,maxWidth:$("#editor-main").width()-o.left-parseInt($("#editor-main").css("paddingRight"),10)})}function c(){h.show().addClass("editor-popup-animate")}function u(){h.hide().removeClass("editor-popup-animate"),g=!1}function a(e,t){return g===t?(u(),void(g=!1)):(g=t,h.children().hide(),$(e).css("display","inline-block"),c(),void i(t))}var l=(e("./picker"),e("rainbowcolor")),d=e("selix"),s=$("#editor-overlay"),p=$("#editor-overlay-main"),m=$(window),f=!0;s.click(function(){f?n():f=!0}),p.click(function(e){e.stopPropagation()}),p.mousedown(function(){f=!1}),p.mouseup(function(){f=!0});var h=$("#editor-popup"),g=!1,A=document.getElementById("editor-main"),v={wrap:function(e,t){d.wrap(A,t[0],t[1])},color:function(e){a(document.getElementById("editor-popup-color"),e)},link:function(e){a(document.getElementById("editor-popup-link"),e)},smiley:function(e){a(document.getElementById("editor-popup-smiley"),e)},image:function(e){a(document.getElementById("editor-popup-image"),e)}};$(".editor-button").each(function(){$(this).click(function(){var e=this.getAttribute("data-editor").split(",");v[e[0]](this,[e[1],e[2]])})});var y=document.getElementById("editor-picker-value");new ColorPicker(document.getElementById("editor-picker-main")).update(function(e){var t=new l(e,"hsl").get("hex");y.value=t,y.style.color=t}),$("#editor-picker-add").click(function(){y.value&&(d.wrap(A,"[color="+y.value+"]","[/color]"),n())}),$("#editor-popup-color-open").click(function(){u(),r(document.getElementById("editor-picker"))});var b=document.getElementById("editor-popup-color-choose");$("#editor-popup-color-add").click(function(){b.value&&(d.wrap(A,"[color="+b.value+"]","[/color]"),u())});var E=document.getElementById("editor-popup-link-choose"),w=document.getElementById("editor-popup-link-text");$("#editor-popup-link-add").click(function(){E.value&&(d.setText(A,"[url="+E.value+"]"+(w.value||E.value)+"[/url]",A),u())}),$(".editor-smiley").click(function(){d.setText(A,this.getAttribute("data-editor"),!0),u()});var k=document.getElementById("editor-popup-image-choose");$("#editor-popup-image-add").click(function(){k.value&&(A.focus(),d.setText(A,"[img]"+k.value+"[/img]",!0),u())})},{"./picker":4,rainbowcolor:1,selix:2}],4:[function(){!function(){function e(e){function t(){n.hsl=[n.hue,100,n.lightness];for(var e=n.listeners,t=0,o=e.length;o>t;t++)n.listeners[t](n.hsl)}function o(e,t,o){$(e).css({display:"block",position:"absolute",top:$(t).position().top+parseInt($(t).css("margin-top"),10)+parseInt($(t).css("border-top-width"),10),left:$(t).position().left+o,height:$(t).height()})}var n=this;n.hue=360,n.lightness=50;var r=document.createElement("img");r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAAyCAIAAAD+5danAAAAx0lEQVR42u3UywqAIBBA0THq/z/YoCIoInoSIcI5uJjMjS5uGiKiXVZXzZwj+nmtw+7zj/2z+cn5aW0uUM9b51Tgob/s9/fXO/tV8Hx6crHjucz5JgBeEg5AOADhAIQDEA5AOACEAxAOQDgA4QCEA0A4AOEAhAMQDkA4AIQDEA5AOADhAIQDEA4A4QCEAxAOQDgA4QAQDkA4AOEAhAMQDgDhAIQDEA5AOADhABAOQDgA4QCEAxAOQDgAhAMQDkA4AOEAhAPg2gjgMbRnviAoFQAAAABJRU5ErkJggg==",e.appendChild(r);var i=!1;$(document.body).mousedown(function(){i=!0}),$(document.body).mouseup(function(){i=!1}),$(r).bind("mousedown mouseup mousemove",function(e){e.preventDefault()}),$(r).mousemove(function(e){if(i){var c=e.pageX-$(r).offset().left;n.hue=c,t(this),o(a,r,c)}});var c=document.createElement("img");c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAAyCAAAAABU7B4sAAABCElEQVR42u2awY6DMBDFWP//P9PL7rVU1cpkgqseOFiidWaUCbyf8zz+vu+vLoHQdyjH7+c8Lq4ugVXQY0mUVX/Y9+iaFcFmlpdFyYeDkg8HJR8Oyj7TxtqDCY+svxuWmbrcQcmHg5IPByUfDsqjpo0bBxOqP+e2ZNnpELLsoOTDQRl2kh2LMuwkO/YxCNWfsyBk2elmUueg5MNBGbq3jEMZureMQzkKYyjdTF3uFA/5cFDy4aDkw0HpKYSDMuc/zB5MqMsdtNiuhBbbLbb7tNhur0f+BaWYgINSlztosV0JLbZbbHcvlH0PvVNiu5vW313LXGxXQovtSmixXQkttjshtttg8jn6ArzSpiCLmzRdAAAAAElFTkSuQmCC",e.appendChild(c);var u=!1;$(document.body).mousedown(function(){u=!0}),$(document.body).mouseup(function(){u=!1}),$(c).bind("mousedown mouseup mousemove",function(e){e.preventDefault()}),$(c).mousemove(function(e){if(u){var r=e.pageX-$(c).offset().left;n.lightness=100-Math.min(Math.floor(r/360*100),100),t(this),o(l,c,r)}});var a=document.createElement("div"),l=document.createElement("div");a.className=l.className="color-picker-position",e.appendChild(a),e.appendChild(l)}e.prototype.listeners=[],e.prototype.update=function(e){this.listeners.push(e)},window.ColorPicker=e}()},{}]},{},[3]);